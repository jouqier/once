# –ê–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Telegram CloudStorage

## –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (–≤–µ—Ä—Å–∏—è 1.4)

–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **—Ä–∞–∑–±–∏—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–ª—é—á–µ–π** –≤ localStorage, –≥–æ—Ç–æ–≤–æ–π –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ CloudStorage:

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π

```
user_{userId}_meta                    - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (version, userId)
user_{userId}_movies_want            - –ú–∞—Å—Å–∏–≤ ID —Ñ–∏–ª—å–º–æ–≤ "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
user_{userId}_movies_watched         - –ú–∞—Å—Å–∏–≤ ID —Ñ–∏–ª—å–º–æ–≤ "–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"
user_{userId}_movies_reviews         - –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ —Ñ–∏–ª—å–º—ã (–æ–±—ä–µ–∫—Ç {id: review})
                                       –ï—Å–ª–∏ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí movies_reviews_g0, movies_reviews_g1, ...
user_{userId}_tv_want                - –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
user_{userId}_tv_watching            - –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ "—Å–º–æ—Ç—Ä—é"
user_{userId}_tv_watched             - –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ "–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"
user_{userId}_tv_season_reviews      - –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ —Å–µ–∑–æ–Ω—ã (–æ–±—ä–µ–∫—Ç {"tvId_season": review})
                                       –ï—Å–ª–∏ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí tv_season_reviews_g0, tv_season_reviews_g1, ...
user_{userId}_tv_episodes            - –í—Å–µ —ç–ø–∏–∑–æ–¥—ã –≤—Å–µ—Ö —Å–µ—Ä–∏–∞–ª–æ–≤ (–æ–±—ä–µ–∫—Ç {tvId: {season: episodes[]}})
                                       –ï—Å–ª–∏ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí tv_episodes_g0, tv_episodes_g1, ...
```

### –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```javascript
{
    version: "1.4",              // –í–µ—Ä—Å–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–∑–±–∏—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
    userId: "123456789",         // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
    movies: {
        want: [1, 2, 3],          // –ú–∞—Å—Å–∏–≤ ID —Ñ–∏–ª—å–º–æ–≤ –≤ —Å–ø–∏—Å–∫–µ "–•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
        watched: [4, 5, 6],       // –ú–∞—Å—Å–∏–≤ ID —Ñ–∏–ª—å–º–æ–≤ –≤ —Å–ø–∏—Å–∫–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"
        reviews: {                // –û—Ç–∑—ã–≤—ã –Ω–∞ —Ñ–∏–ª—å–º—ã (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
            "123": {
                rating: 5,
                review: "–û—Ç–ª–∏—á–Ω—ã–π —Ñ–∏–ª—å–º!",
                date: "2024-01-15T10:30:00.000Z"
            }
        }
    },
    tvShows: {
        want: [10, 20],           // –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ –≤ —Å–ø–∏—Å–∫–µ "–•–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
        watching: [30, 40],       // –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ –≤ —Å–ø–∏—Å–∫–µ "–°–º–æ—Ç—Ä—é"
        watched: [50, 60],        // –ú–∞—Å—Å–∏–≤ ID —Å–µ—Ä–∏–∞–ª–æ–≤ –≤ —Å–ø–∏—Å–∫–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"
        episodes: {               // –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —ç–ø–∏–∑–æ–¥—ã (–≤—Å–µ —Å–µ—Ä–∏–∞–ª—ã –≤ –æ–¥–Ω–æ–º –∫–ª—é—á–µ)
            "100": {              // tvId
                "1": [1, 29],     // –°–µ–∑–æ–Ω 1: –¥–∏–∞–ø–∞–∑–æ–Ω [1, 29] (–≤—Å–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã)
                "2": [1, 21],     // –°–µ–∑–æ–Ω 2: –¥–∏–∞–ø–∞–∑–æ–Ω [1, 21] (–≤—Å–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã)
                "3": [1, 2, 5, 7, 21]  // –°–µ–∑–æ–Ω 3: –º–∞—Å—Å–∏–≤ (–µ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏)
            }
        },
        seasonReviews: {          // –û—Ç–∑—ã–≤—ã –Ω–∞ —Å–µ–∑–æ–Ω—ã (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
            "100_1": {            // –§–æ—Ä–º–∞—Ç: "tvId_season"
                rating: 5,
                review: "–û—Ç–ª–∏—á–Ω—ã–π —Å–µ–∑–æ–Ω!",
                date: "2024-01-15T10:30:00.000Z"
            }
        }
    }
    // search.recent —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ sessionStorage, –Ω–µ –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ CloudStorage
}
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram CloudStorage

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|----------|------------|
| **–ú–∞–∫—Å–∏–º—É–º –∫–ª—é—á–µ–π** | 1024 –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| **–î–ª–∏–Ω–∞ –∫–ª—é—á–∞** | 1-128 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç |
| **–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞** | A-Z, a-z, 0-9, _, - | ‚ö†Ô∏è –ù—É–∂–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è |
| **–†–∞–∑–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è** | **0-4096 —Å–∏–º–≤–æ–ª–æ–≤** | ‚ùå **–ö–†–ò–¢–ò–ß–ù–û!** |
| **API** | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (callback) | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ |

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å CloudStorage

### ‚úÖ –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ì–û–¢–û–í–ê –∫ –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–±–∏—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (–≤–µ—Ä—Å–∏—è 1.4):**
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: ~50 —Å–∏–º–≤–æ–ª–æ–≤
- –°–ø–∏—Å–∫–∏ ID (want/watched/watching): ~100-500 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å–ø–∏—Å–æ–∫
- –û—Ç–∑—ã–≤—ã (movies_reviews): ~2000-3500 —Å–∏–º–≤–æ–ª–æ–≤ (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ –≥—Ä—É–ø–ø—ã)
- –≠–ø–∏–∑–æ–¥—ã (tv_episodes): ~1500-3500 —Å–∏–º–≤–æ–ª–æ–≤ (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ –≥—Ä—É–ø–ø—ã)
- **–õ–∏–º–∏—Ç CloudStorage: 4096 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∫–ª—é—á** ‚úÖ

**–í—ã–≤–æ–¥:** –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–∏ 1.4 **–ü–û–õ–ù–û–°–¢–¨–Æ –°–û–í–ú–ï–°–¢–ò–ú–ê** —Å CloudStorage!

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å

–í—Å–µ –º–µ—Ç–æ–¥—ã CloudStorage –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å callback:
```javascript
// –¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)
const data = localStorage.getItem('user_data_123');
const parsed = JSON.parse(data);

// CloudStorage (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)
TG.CloudStorage.getItem('user_data_123', (error, value) => {
    if (error) { /* ... */ }
    const parsed = JSON.parse(value);
});
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π

–¢–µ–∫—É—â–∏–µ –∫–ª—é—á–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã:
- `user_data_${userId}` - ‚úÖ OK (–µ—Å–ª–∏ userId —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
- `cache_${key}` - ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ key

## –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≤–µ—Ä—Å–∏—è 1.4)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π

```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ StorageAdapter)
const KEYS = {
    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    META: 'user_{userId}_meta',                    // version, userId
    
    // –§–∏–ª—å–º—ã
    MOVIES_WANT: 'user_{userId}_movies_want',       // [1, 2, 3, ...]
    MOVIES_WATCHED: 'user_{userId}_movies_watched', // [4, 5, 6, ...]
    MOVIES_REVIEWS: 'user_{userId}_movies_reviews', // { "123": {...}, "456": {...} }
    
    // –°–µ—Ä–∏–∞–ª—ã
    TV_WANT: 'user_{userId}_tv_want',
    TV_WATCHING: 'user_{userId}_tv_watching',
    TV_WATCHED: 'user_{userId}_tv_watched',
    TV_SEASON_REVIEWS: 'user_{userId}_tv_season_reviews',  // { "100_1": {...} }
    
    // –≠–ø–∏–∑–æ–¥—ã (–≤—Å–µ —Å–µ—Ä–∏–∞–ª—ã –≤ –æ–¥–Ω–æ–º –∫–ª—é—á–µ —Å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º)
    TV_EPISODES: 'user_{userId}_tv_episodes',       // { "100": {"1": [1,29], "2": [1,21]} }
};
```

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –≥—Ä—É–ø–ø—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ 4096 —Å–∏–º–≤–æ–ª–æ–≤:

```javascript
// –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≥—Ä—É–ø–ø—ã:
'user_{userId}_movies_reviews_g0'    // –ü–µ—Ä–≤–∞—è –≥—Ä—É–ø–ø–∞ –æ—Ç–∑—ã–≤–æ–≤
'user_{userId}_movies_reviews_g1'    // –í—Ç–æ—Ä–∞—è –≥—Ä—É–ø–ø–∞ –æ—Ç–∑—ã–≤–æ–≤
'user_{userId}_tv_episodes_g0'       // –ü–µ—Ä–≤–∞—è –≥—Ä—É–ø–ø–∞ —ç–ø–∏–∑–æ–¥–æ–≤
'user_{userId}_tv_episodes_g1'       // –í—Ç–æ—Ä–∞—è –≥—Ä—É–ø–ø–∞ —ç–ø–∏–∑–æ–¥–æ–≤
```

### ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —ç–ø–∏–∑–æ–¥–æ–≤

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞:

```javascript
// –ï—Å–ª–∏ –≤—Å–µ —ç–ø–∏–∑–æ–¥—ã —Å–µ–∑–æ–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã –ø–æ–¥—Ä—è–¥ ‚Üí –¥–∏–∞–ø–∞–∑–æ–Ω
{
    "100": {
        "1": [1, 29],     // –î–∏–∞–ø–∞–∑–æ–Ω: —ç–ø–∏–∑–æ–¥—ã 1-29 (—ç–∫–æ–Ω–æ–º–∏—è ~95% –º–µ—Å—Ç–∞)
        "2": [1, 21]      // –î–∏–∞–ø–∞–∑–æ–Ω: —ç–ø–∏–∑–æ–¥—ã 1-21
    }
}

// –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏ ‚Üí –º–∞—Å—Å–∏–≤
{
    "100": {
        "3": [1, 2, 5, 7, 21]  // –ú–∞—Å—Å–∏–≤: –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã –Ω–µ –≤—Å–µ –ø–æ–¥—Ä—è–¥
    }
}
```

### –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –†–∞–∑–º–µ—Ä JSON | –°—Ç–∞—Ç—É—Å |
|-----------|-----------|-------------|--------|
| –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ | - | ~50 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| movies_want | 100 —Ñ–∏–ª—å–º–æ–≤ | ~400 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| movies_watched | 200 —Ñ–∏–ª—å–º–æ–≤ | ~800 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| movies_reviews | 50 –æ—Ç–∑—ã–≤–æ–≤ | ~2500 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| tv_episodes (500 —ç–ø., 23 —Å–µ–∑–æ–Ω–∞) | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | ~500 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| tv_episodes (500 —ç–ø., 23 —Å–µ–∑–æ–Ω–∞) | –û–±—ã—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | ~1900 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| tv_episodes (1000 —ç–ø., 50 —Å–µ–∑–æ–Ω–æ–≤) | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | ~1000 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |
| tv_season_reviews | 30 –æ—Ç–∑—ã–≤–æ–≤ | ~1500 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ OK |

**–í—ã–≤–æ–¥:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–ª–µ–∑–∞—é—Ç –≤ –ª–∏–º–∏—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤ —Å –±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º!

## –û—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π (–≤–µ—Ä—Å–∏—è 1.4)

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):
- meta: 1
- movies_want, movies_watched: 2
- tv_want, tv_watching, tv_watched: 3
- movies_reviews, tv_season_reviews, tv_episodes: 3
- **–ò—Ç–æ–≥–æ: ~9 –∫–ª—é—á–µ–π** ‚úÖ

### –°—Ä–µ–¥–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):
- –ë–∞–∑–æ–≤—ã–µ: 9
- movies_reviews (–≥—Ä—É–ø–ø—ã): 1-2
- tv_season_reviews (–≥—Ä—É–ø–ø—ã): 1-2
- tv_episodes (–≥—Ä—É–ø–ø—ã): 1-2
- **–ò—Ç–æ–≥–æ: ~12-15 –∫–ª—é—á–µ–π** ‚úÖ

### –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π):
- –ë–∞–∑–æ–≤—ã–µ: 9
- movies_reviews (–≥—Ä—É–ø–ø—ã): 3-5 (150+ –æ—Ç–∑—ã–≤–æ–≤)
- tv_season_reviews (–≥—Ä—É–ø–ø—ã): 3-5 (100+ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Å–µ–∑–æ–Ω—ã)
- tv_episodes (–≥—Ä—É–ø–ø—ã): 3-5 (50+ —Å–µ—Ä–∏–∞–ª–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–µ–∑–æ–Ω–æ–≤)
- **–ò—Ç–æ–≥–æ: ~18-24 –∫–ª—é—á–µ–π** ‚úÖ (–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –ª–∏–º–∏—Ç–∞ 1024)

### –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä):
- –ë–∞–∑–æ–≤—ã–µ: 9
- movies_reviews (–≥—Ä—É–ø–ø—ã): 10-15 (500+ –æ—Ç–∑—ã–≤–æ–≤)
- tv_season_reviews (–≥—Ä—É–ø–ø—ã): 10-15 (300+ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Å–µ–∑–æ–Ω—ã)
- tv_episodes (–≥—Ä—É–ø–ø—ã): 10-15 (100+ —Å–µ—Ä–∏–∞–ª–æ–≤)
- **–ò—Ç–æ–≥–æ: ~39-54 –∫–ª—é—á–µ–π** ‚úÖ (–≤—Å–µ –µ—â–µ –¥–∞–ª–µ–∫–æ –æ—Ç –ª–∏–º–∏—Ç–∞ 1024)

**–í—ã–≤–æ–¥:** –î–∞–∂–µ –≤ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 50-60, —á—Ç–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ–Ω–µ–µ 6% –æ—Ç –ª–∏–º–∏—Ç–∞ CloudStorage (1024 –∫–ª—é—á–∞).

## –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ CloudStorage

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤–µ—Ä—Å–∏—è 1.4):

1. ‚úÖ **–†–∞–∑–±–∏—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–∞—Ö
2. ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –æ—Ç–∑—ã–≤—ã –∏ —ç–ø–∏–∑–æ–¥—ã –≤ –æ–¥–Ω–æ–º –∫–ª—é—á–µ
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –≥—Ä—É–ø–ø—ã** - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ 4096 —Å–∏–º–≤–æ–ª–æ–≤
4. ‚úÖ **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —ç–ø–∏–∑–æ–¥–æ–≤** - –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≤–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–æ–≤
5. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π** - —Ç–æ–ª—å–∫–æ A-Z, a-z, 0-9, _, -
6. ‚úÖ **StorageAdapter** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ localStorage

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **CloudStorageAdapter** - –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Telegram CloudStorage API
   ```javascript
   class CloudStorageAdapter {
       async getItem(key) {
           return new Promise((resolve, reject) => {
               window.Telegram.WebApp.CloudStorage.getItem(key, (error, value) => {
                   if (error) reject(error);
                   else resolve(value);
               });
           });
       }
       
       async setItem(key, value) {
           return new Promise((resolve, reject) => {
               window.Telegram.WebApp.CloudStorage.setItem(key, value, (error, success) => {
                   if (error) reject(error);
                   else resolve(success);
               });
           });
       }
       
       async removeItem(key) {
           return new Promise((resolve, reject) => {
               window.Telegram.WebApp.CloudStorage.removeItem(key, (error, success) => {
                   if (error) reject(error);
                   else resolve(success);
               });
           });
       }
       
       async getKeys() {
           return new Promise((resolve, reject) => {
               window.Telegram.WebApp.CloudStorage.getKeys((error, keys) => {
                   if (error) reject(error);
                   else resolve(keys);
               });
           });
       }
   }
   ```

2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ StorageAdapter** - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   ```javascript
   class StorageAdapter {
       constructor(storage = 'localStorage') {
           this.storage = storage === 'cloudStorage' 
               ? new CloudStorageAdapter() 
               : localStorage;
           this.isAsync = storage === 'cloudStorage';
       }
       
       async get(key) {
           if (this.isAsync) {
               return await this.storage.getItem(key);
           }
           return this.storage.getItem(key);
       }
       
       async set(key, value) {
           if (this.isAsync) {
               return await this.storage.setItem(key, value);
           }
           return this.storage.setItem(key, value);
       }
   }
   ```

3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UserDataStore** - —Å–¥–µ–ª–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏
   ```javascript
   class UserDataStore {
       async addMovie(listType, movie) {
           // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
           const list = await this._getList('movies', listType);
           list.push(movie.id);
           await this._saveList('movies', listType, list);
       }
       
       async getMovies(listType) {
           // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
           return await this._getList('movies', listType);
       }
   }
   ```

4. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø–µ—Ä–µ–Ω–æ—Å –∏–∑ localStorage –≤ CloudStorage
   ```javascript
   async function migrateToCloudStorage(userId) {
       const localAdapter = new StorageAdapter('localStorage');
       const cloudAdapter = new StorageAdapter('cloudStorage');
       
       // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ localStorage
       const keys = [
           `user_${userId}_meta`,
           `user_${userId}_movies_want`,
           `user_${userId}_movies_watched`,
           // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏
       ];
       
       // –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ
       for (const key of keys) {
           const value = await localAdapter.get(key);
           if (value) {
               await cloudAdapter.set(key, value);
           }
       }
       
       // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
       const cloudMeta = await cloudAdapter.get(`user_${userId}_meta`);
       if (cloudMeta) {
           console.log('–ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
           // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
       }
   }
   ```

5. **Fallback –Ω–∞ localStorage** - –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞
   ```javascript
   class HybridStorageAdapter {
       constructor() {
           this.cloudStorage = new CloudStorageAdapter();
           this.localStorage = localStorage;
       }
       
       async get(key) {
           try {
               // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ CloudStorage
               const value = await this.cloudStorage.getItem(key);
               if (value) {
                   // –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤ localStorage
                   this.localStorage.setItem(key, value);
                   return value;
               }
           } catch (error) {
               console.warn('CloudStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage');
           }
           
           // Fallback –Ω–∞ localStorage
           return this.localStorage.getItem(key);
       }
       
       async set(key, value) {
           // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–±–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
           this.localStorage.setItem(key, value);
           
           try {
               await this.cloudStorage.setItem(key, value);
           } catch (error) {
               console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CloudStorage');
           }
       }
   }
   ```

### üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ CloudStorage:

- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞–∫–µ
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç localStorage –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ –≤ –ª—é–±–æ–º Telegram –∫–ª–∏–µ–Ω—Ç–µ

### ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏—è (4096 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ùå –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API (—Å–ª–æ–∂–Ω–µ–µ –∫–æ–¥)
- ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑–±–∏–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ë–æ–ª—å—à–µ –∫–ª—é—á–µ–π = –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤

## –í—ã–≤–æ–¥

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–∏ 1.4 –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ CloudStorage:**

1. ‚úÖ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π** - 9-24 –∫–ª—é—á–∞ (–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –ª–∏–º–∏—Ç–∞ 1024)
2. ‚úÖ **–†–∞–∑–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–ª–µ–∑–∞—é—Ç –≤ 4096 —Å–∏–º–≤–æ–ª–æ–≤ —Å –∑–∞–ø–∞—Å–æ–º
3. ‚úÖ **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** - –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–ª—è —ç–ø–∏–∑–æ–¥–æ–≤ —ç–∫–æ–Ω–æ–º—è—Ç ~95% –º–µ—Å—Ç–∞
4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ** - –≥—Ä—É–ø–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π** - —Ç–æ–ª—å–∫–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã (A-Z, a-z, 0-9, _, -)
6. ‚è≥ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ StorageAdapter –∏ UserDataStore

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

- **–ú–∏–Ω–∏–º—É–º –∫–ª—é—á–µ–π**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –∏ —ç–ø–∏–∑–æ–¥–æ–≤ –≤ –æ–¥–∏–Ω –∫–ª—é—á
- **–ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤**: –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —ç–ø–∏–∑–æ–¥–æ–≤ —Å–µ—Ä–∏–∞–ª–∞
- **–ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –î–∏–∞–ø–∞–∑–æ–Ω—ã –≤–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–æ–≤ –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ø–∏–∑–æ–¥–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –≥—Ä—É–ø–ø—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–±–æ—Ç—ã**: –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `CloudStorageAdapter` —Å –ø—Ä–æ–º–∏—Å–∞–º–∏
2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `StorageAdapter` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `UserDataStore` - —Å–¥–µ–ª–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage –≤ CloudStorage
5. –î–æ–±–∞–≤–∏—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º —Å fallback –Ω–∞ localStorage
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout

**–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç:** ~2-3 –¥–Ω—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ + 1-2 –¥–Ω—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, —Ç–∞–∫ –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.

