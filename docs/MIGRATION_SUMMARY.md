# –†–µ–∑—é–º–µ –º–∏–≥—Ä–∞—Ü–∏–∏ v1.2

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω–æ**. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

## üìä –ë—ã–ª–æ ‚Üí –°—Ç–∞–ª–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–ë—ã–ª–æ (v1.1):**
```
movies: {
  want: [—Ñ–∏–ª—å–º—ã + —Å–µ—Ä–∏–∞–ª—ã]
  watched: [—Ñ–∏–ª—å–º—ã + —Å–µ—Ä–∏–∞–ª—ã]
  watching: [—Ç–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª—ã]
}
```

**–°—Ç–∞–ª–æ (v1.2):**
```
movies: {
  want: [—Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å–º—ã]
  watched: [—Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å–º—ã]
}

tvShows: {
  want: [—Ç–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª—ã]
  watching: [—Ç–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª—ã]
  watched: [—Ç–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª—ã]
}
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –§–∏–ª—å–º—ã –ù–ï –º–æ–≥—É—Ç –±—ã—Ç—å "watching"
–§–∏–ª—å–º—ã —Å–º–æ—Ç—Ä—è—Ç –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑, –ø–æ—ç—Ç–æ–º—É —É –Ω–∏—Ö —Ç–æ–ª—å–∫–æ 2 —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `want` - —Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å
- `watched` - –ø–æ—Å–º–æ—Ç—Ä–µ–ª

### 2. –°–µ—Ä–∏–∞–ª—ã –ú–û–ì–£–¢ –±—ã—Ç—å "watching"
–°–µ—Ä–∏–∞–ª—ã —Å–º–æ—Ç—Ä—è—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É —É –Ω–∏—Ö 3 —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `want` - —Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å
- `watching` - —Å–º–æ—Ç—Ä—é (–µ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —ç–ø–∏–∑–æ–¥—ã)
- `watched` - –ø–æ—Å–º–æ—Ç—Ä–µ–ª (–≤—Å–µ —ç–ø–∏–∑–æ–¥—ã)

### 3. –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã API

**–î–ª—è —Ñ–∏–ª—å–º–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```javascript
userMoviesService.getMovieState(movieId)
userMoviesService.addToWant(movie)
userMoviesService.addToWatched(movie)
```

**–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ (–Ω–æ–≤—ã–µ):**
```javascript
userMoviesService.getTVShowState(showId)
userMoviesService.addTVShowToWant(show)
userMoviesService.addTVShowToWatching(show)
userMoviesService.addTVShowToWatched(show)
```

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

### –ï—Å–ª–∏ –≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
**–ù–∏—á–µ–≥–æ!** –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è.

### –ï—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `media_type` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–æ–≤
3. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [API_CHANGES_v1.2.md](./API_CHANGES_v1.2.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:
```bash
node tests/test-migration.js
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: 12/12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
```

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ß–∏—â–µ –∫–æ–¥** - –Ω–µ –Ω—É–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ `media_type`
2. **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º –≤ `watching`
3. **–ü–æ–Ω—è—Ç–Ω–µ–µ –ª–æ–≥–∏–∫–∞** - —è–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. **–ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞** - –º–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./STORAGE_SEPARATION.md)
- [–°–ø—Ä–∞–≤–∫–∞ –ø–æ API](./API_CHANGES_v1.2.md)
- [Changelog](../CHANGELOG.md)
